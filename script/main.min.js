document.addEventListener("DOMContentLoaded",()=>{const main=document.querySelector(".main"),header=document.querySelector("#header"),makeHeaderSticky=()=>{let scrollTop,stickyStartPosition;window.scrollY>=main.offsetHeight/4?(header.classList.add("sticky"),main.style.marginTop=`${header.offsetHeight}px`):(header.classList.remove("sticky"),main.style.marginTop="0px")};window.addEventListener("scroll",()=>{makeHeaderSticky()}),document.querySelector("#toggle-menu").addEventListener("click",(function(){document.querySelector(".burger__lines").classList.toggle("is-active"),document.querySelector(".nav").classList.toggle("is-active")}));const tabLinks=document.querySelectorAll(".tab__link"),tabs=document.querySelectorAll(".tab__content");tabLinks.forEach(link=>addEventListener("click",(function(e){e.target===link?link.classList.add("is-active"):link.classList.remove("is-active")})))});const activateSlider=(sliderElem,sliderControls,currentIndex=0)=>{const navItems=document.querySelectorAll(".about-us-thumb-img");for(let[index,slide]of Array.from(sliderElem).entries()){const sliderBtn=document.createElement("button");sliderBtn.classList.add("btn-reset","about-us-slider__btn"),sliderBtn.setAttribute("id",`btn-${index}`),slide.setAttribute("id",`slide-${index}`),sliderBtn.setAttribute("aria-label","Поменять слайд"),sliderBtn.addEventListener("click",()=>{changeSlide(index,sliderElem),toggleClass(index,Array.from(document.querySelectorAll(".about-us-slider__btn")),"is-active"),navItems.forEach(item=>{item.dataset.target==index&&toggleClass(index,item.parentElement,"is-active")})}),sliderControls.append(sliderBtn)}document.getElementById(`btn-${currentIndex}`).classList.toggle("is-active")};let touchstartX=0,touchendX=0;function handleTouchStart(event){event.preventDefault(),touchstartX=event.changedTouches[0].screenX}function handleTouchMove(event){event.preventDefault()}function handleTouchEnd(event){event.preventDefault(),touchendX=event.changedTouches[0].screenX;const targetId=Number(event.target.closest(".about-us-slide").getAttribute("id").split("-")[1]),lastIndex=Array.from(slides).length-1;touchstartX<touchendX&&Math.abs(touchstartX-touchendX)>20?nextIndex=0!==targetId?targetId-1:lastIndex:touchstartX>touchendX&&Math.abs(touchstartX-touchendX)>20?nextIndex=targetId!==lastIndex?targetId+1:0:nextIndex=targetId,changeSlide(nextIndex,slides),toggleClass(nextIndex,Array.from(document.querySelectorAll(".about-us-slider__btn")),"is-active")}function changeSlide(i,sliderElem){currentIndex=i,Array.from(sliderElem).forEach((item,index)=>{index===currentIndex?item.classList.remove("hidden"):item.classList.add("hidden")})}function toggleClass(i,targetEl,targetClass){if(Array.isArray(targetEl))targetEl.forEach(btn=>{btn.classList.remove(targetClass)}),targetEl[i].classList.add(targetClass);else{targetEl.classList.add(targetClass);const siblings=getSiblings(targetEl);siblings.forEach(el=>el.classList.remove(targetClass))}}let getSiblings=function(e){let siblings=[];if(!e.parentNode)return siblings;let sibling=e.parentNode.firstChild;for(;sibling;)1===sibling.nodeType&&sibling!==e&&siblings.push(sibling),sibling=sibling.nextSibling;return siblings};scrollElements=Array.from(document.getElementsByClassName("js-scroll"));let options={root:null,threshold:.1},cb=entries=>{entries.forEach(entry=>{entry.isIntersecting?entry.target.classList.add("scrolled"):entry.target.classList.remove("scrolled")})},observer=new IntersectionObserver(cb,options);scrollElements.forEach(el=>observer.observe(el));