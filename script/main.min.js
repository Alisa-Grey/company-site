function changeSlide(e,t){currentIndex=e,Array.from(t).forEach((e,t)=>{t===currentIndex?(e.classList.add("highlight"),document.querySelector(".slider-container").style.minHeight=`${e.offsetHeight+40}px`):e.classList.remove("highlight")})}function toggleClass(e,t,s){if(Array.isArray(t))t.forEach(e=>{e.classList.remove(s)}),t[e].classList.add(s);else{t.classList.add(s);const e=getSiblings(t);e.forEach(e=>e.classList.remove(s))}}document.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".main"),t=document.querySelector("#header"),s=()=>{let s=window.scrollY,i=e.offsetHeight/4;s>=i?(t.classList.add("sticky"),e.style.marginTop=`${t.offsetHeight}px`):(t.classList.remove("sticky"),e.style.marginTop="0px")};window.addEventListener("scroll",()=>{s()}),document.querySelector("#toggle-menu").addEventListener("click",function(){document.querySelector(".burger__lines").classList.toggle("is-active"),document.querySelector(".nav").classList.toggle("is-active")});const i=document.querySelectorAll(".tab__link");document.querySelectorAll(".tab__content");i.forEach(e=>addEventListener("click",function(t){t.target===e?e.classList.add("is-active"):e.classList.remove("is-active")}))});const activateSlider=(e,t,s=0)=>{const i=document.querySelectorAll(".about-thumb-img");for(let[s,n]of Array.from(e).entries()){const l=document.createElement("button");l.classList.add("btn-reset","about-slider__btn"),l.setAttribute("id",`btn-${s}`),n.setAttribute("id",`slide-${s}`),l.setAttribute("aria-label","Поменять слайд"),l.addEventListener("click",()=>{changeSlide(s,e),toggleClass(s,Array.from(document.querySelectorAll(".about-slider__btn")),"is-active"),i.forEach(e=>{Number(e.dataset.target)===s&&toggleClass(s,e.closest("li"),"is-active")})}),t.append(l)}document.getElementById(`btn-${s}`).classList.toggle("is-active")};let getSiblings=function(e){let t=[];if(!e.parentNode)return t;let s=e.parentNode.firstChild;for(;s;)1===s.nodeType&&s!==e&&t.push(s),s=s.nextSibling;return t};class DraggingEvent{constructor(e){this.target=e}event(e){let t;this.target.addEventListener("mousedown",s=>{function i(){window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",i),document.removeEventListener("mouseleave",i),t(null)}s.preventDefault(),t=e(s),window.addEventListener("mousemove",t),document.addEventListener("mouseleave",i),window.addEventListener("mouseup",i)}),this.target.addEventListener("touchstart",s=>{function i(){window.removeEventListener("touchmove",t),window.removeEventListener("touchend",i),t(null)}t=e(s),window.addEventListener("touchmove",t),window.addEventListener("touchend",i),document.body.addEventListener("mouseleave",i)})}getDistance(e){function t(t){let s,i;return"touches"in t?(s=t.touches[0].clientX,i=t.touches[0].clientY):(s=t.clientX,i=t.clientY),function(t){return e(null===t?null:"touches"in t?{x:t.touches[0].clientX-s,y:t.touches[0].clientY-i}:{x:t.clientX-s,y:t.clientY-i})}}this.event(t)}}class CardCarousel extends DraggingEvent{constructor(e,t){super(e),this.container=e,this.controllerElement=t,this.slides=e.querySelectorAll(".about-slide"),this.centerIndex=(this.slides.length-1)/2,this.cardWidth=this.slides[0].offsetWidth/this.container.offsetWidth*100,this.xScale={},window.addEventListener("resize",this.updateCardWidth.bind(this)),this.build(),super.getDistance(this.moveSlides.bind(this))}updateCardWidth(){this.cardWidth=this.slides[0].offsetWidth/this.container.offsetWidth*100,this.build()}build(e=0){for(let e=0;e<this.slides.length;e++){const t=e-this.centerIndex,s=this.calcScale(t),i=this.calcScale2(t),n=-Math.abs(e-this.centerIndex),l=this.calcPos(t,i);this.xScale[t]=this.slides[e],this.updateSlides(this.slides[e],{x:t,scale:s,leftPos:l,zIndex:n})}}controller(e){const t={...this.xScale};this.xScale=t;for(let e in t){const t=this.calcScale(e),s=this.calcScale2(e),i=this.calcPos(e,s),n=-Math.abs(e);this.updateSlides(this.xScale[e],{x:e,scale:t,leftPos:i,zIndex:n})}}calcPos(e,t){let s;return e<0?(s=(100*t-this.cardWidth)/2,s):(s=100-(100*t+this.cardWidth)/2,s)}updateSlides(e,t){if((t.x||0==t.x)&&e.setAttribute("data-x",t.x),t.leftPos&&(e.style.left="0%"),t.zIndex||0==t.zIndex){if(0==t.zIndex){if(e.classList.add("highlight"),0==e.dataset.x){let t=e.getAttribute("id").split("-")[1];document.querySelector(".slider-container").style.minHeight=`${e.offsetHeight+40}px`,toggleClass(t,Array.from(document.querySelectorAll(".about-slider__btn")),"is-active"),toggleClass(t,Array.from(document.querySelectorAll(".about__thumbnail")),"is-active")}}else e.classList.remove("highlight");e.style.zIndex=t.zIndex}}calcScale2(e){let t;return e<=0?(t=1- -.2*e,t):e>0?(t=1-.2*e,t):void 0}calcScale(e){const t=1-.2*Math.pow(e,2);return t<=0?0:t}checkOrdering(e,t,s){const i=parseInt(e.dataset.x),n=Math.round(s);let l=t;t!==t+n&&(t+n>i?t+n>this.centerIndex&&(l=t+n-1-this.centerIndex-n-this.centerIndex):t+n<i&&t+n<-this.centerIndex&&(l=t+n+1+this.centerIndex-n+this.centerIndex),this.xScale[l+n]=e);const c=-Math.abs(l+n);return this.updateSlides(e,{zIndex:c}),l}moveSlides(e){let t;if(null!=e)this.container.classList.remove("smooth-return"),t=e.x/250;else{this.container.classList.add("smooth-return"),t=0;for(let e in this.xScale)this.updateSlides(this.xScale[e],{x:e,zIndex:Math.abs(Math.abs(e)-this.centerIndex)})}for(let e=0;e<this.slides.length;e++){const s=this.checkOrdering(this.slides[e],parseInt(this.slides[e].dataset.x),t),i=this.calcScale(s+t),n=this.calcScale2(s+t),l=this.calcPos(s+t,n);this.updateSlides(this.slides[e],{scale:i,leftPos:l})}}}scrollElements=Array.from(document.getElementsByClassName("js-scroll"));let options={root:null,threshold:.1},cb=e=>{e.forEach(e=>{e.isIntersecting?e.target.classList.add("scrolled"):e.target.classList.remove("scrolled")})},observer=new IntersectionObserver(cb,options);scrollElements.forEach(e=>observer.observe(e));